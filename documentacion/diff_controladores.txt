========================================
diff_controladores_mod0015.txt
========================================

/// ---------------------------------------------------------------------------
/// DIFERENCIAS FUNCIONALES REALES mod0015 → mod0016
/// Módulo: Controladores
/// ---------------------------------------------------------------------------

1) Archivos nuevos

+ agregado: controlador_puntajes_reales.dart
  Métodos públicos expuestos:
    - Future<Map<String, List<JugadorReal>>> obtenerJugadoresPorEquipo(String idLiga)
    - Future<void> guardarPuntajesDeFecha(String idLiga, String idFecha, Map<String,int> puntajesPorJugador)
    - Future<bool> faltanPuntajes(String idLiga, String idFecha)
  Descripción funcional:
    Controlador encargado de:
      • Obtener jugadores reales activos agrupados por equipo.
      • Crear o actualizar puntajes reales por fecha, evitando duplicados.
      • Verificar completitud de puntajes para permitir cierre de fechas.


2) Archivos modificados

~ modificado: controlador_fechas.dart
  Cambios funcionales:
    - Se agregó dependencia formal a ControladorPuntajesReales.
    - Se eliminó completamente el método interno _faltanPuntajes (stub).
    - Método cerrarFecha(FechaLiga fecha):
        • Ahora delega la validación de completitud de puntajes a:
            controladorPuntajesReales.faltanPuntajes(idLiga, idFecha)
        • Si faltan puntajes lanza:
            Exception("Faltan puntajes para cerrar la fecha.")
        • Mantiene lógica existente:
            - Cerrar la fecha mediante ServicioFechas.cerrarFecha()
            - Archivar liga si fecha.numeroFecha == liga.totalFechasTemporada
    - No se modificó ninguna otra firma pública.

3) Archivos sin cambios
= sin cambios:
  - controlador_ligas.dart
  - controlador_participaciones.dart
  - controlador_jugadores.dart
  - controlador_jugadores_reales.dart
  - controlador_equipos_reales.dart
  - controlador_equipo_fantasy.dart
  - controlador_alineaciones.dart
  - controlador_router.dart
